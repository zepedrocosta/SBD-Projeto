[mysqld]

#############################################
#                Basic Settings             #
#############################################
port                            = 3306
bind-address                    = 0.0.0.0
default-storage-engine          = InnoDB
character-set-server            = utf8mb4
collation-server                = utf8mb4_unicode_ci

#############################################
#             Memory & Buffers              #
#         Optimized for ~12GB RAM VM        #
#############################################
innodb_buffer_pool_size         = 8G
innodb_buffer_pool_instances    = 8
innodb_buffer_pool_chunk_size   = 128M

query_cache_type                = 0
query_cache_size                = 0

thread_cache_size               = 100
max_connections                 = 500
max_connect_errors              = 100000

#############################################
#               Table Settings              #
#############################################
table_open_cache                = 4000
table_definition_cache          = 2000
open_files_limit                = 65535

#############################################
#             InnoDB Optimization           #
#############################################
innodb_file_per_table           = 1
innodb_flush_method             = O_DIRECT
innodb_log_file_size            = 2G
innodb_log_buffer_size          = 64M
innodb_flush_log_at_trx_commit = 2
innodb_doublewrite              = 1

innodb_thread_concurrency       = 0
innodb_read_io_threads          = 8
innodb_write_io_threads         = 8
innodb_io_capacity              = 2000
innodb_io_capacity_max          = 4000
innodb_lru_scan_depth           = 2000
innodb_page_cleaners            = 4

#############################################
#         Binary Logging & Replication      #
#############################################
skip-log-bin
sync_binlog                     = 0
skip-slave-start
innodb_support_xa               = 0

#############################################
#               MyISAM Settings             #
#############################################
key_buffer_size                 = 256M
myisam_sort_buffer_size         = 64M

#############################################
#            Sort / Join Buffers            #
#############################################
sort_buffer_size                = 2M
join_buffer_size                = 2M
read_buffer_size                = 1M
read_rnd_buffer_size            = 2M

#############################################
#             Temporary Tables              #
#############################################
tmp_table_size                  = 256M
max_heap_table_size             = 256M

#############################################
#                 Logging                   #
#############################################
slow_query_log                  = 0

#############################################
#           Performance Schema              #
#############################################
performance_schema              = OFF

#############################################
#         Misc. Optimizations               #
#############################################
skip-name-resolve
innodb_adaptive_hash_index      = 1
innodb_checksum_algorithm       = crc32
innodb_flush_neighbors          = 0
innodb_old_blocks_time          = 1000
innodb_stats_on_metadata        = 0
innodb_lock_wait_timeout        = 120

#############################################
#           Connection Settings             #
#############################################
wait_timeout                    = 28800
interactive_timeout             = 28800
max_allowed_packet              = 256M

[mysql]
default-character-set           = utf8mb4

[client]
default-character-set           = utf8mb4
